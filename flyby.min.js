(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=[].slice;b={get:{method:"GET"},create:{method:"POST",has_body:!0},update:{method:"PATCH",has_body:!0},destroy:{method:"DESTROY",has_body:!0}},e=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/,c={"Content-Type":"application/json; charset=utf-8",Accept:"application/json, text/plain, */*"},a={"%40":"@","%3A":":","%24":"$","%2C":",","%3B":";"},r=Object.prototype.toString,o=function(a){return a>=200&&300>a},n=function(a){return/object/i.test(typeof a)},s=function(a){return function(b){return null!==r.call(b).match(a)}},k=s(/\[object\sfile\]/i),j=s(/\[object\sblob\]/i),l=s(/\[object\sformdata\]/i),q=function(a){return JSON.stringify(a)},m=function(a){return/function/i.test(typeof a)},t=function(a){var b,c,d;return d="hasOwnProperty"!==a,b=[".",a].join(""),c=e.test(b),a&&d&&c},p=function(a){return function(b,c){return""+a+c}},i=function(a){var b,c,d;return b=(a||"").split("\n"),d=function(a,b){var c;return c=new RegExp(b,"gi"),c.test(a)},c=function(a){var c,e,f;return(typeof a).match(/string/i)?(f=function(){var e,f,g;for(g=[],e=0,f=b.length;f>e;e++)c=b[e],d(c,a)&&g.push(c);return g}()[0],f&&2===f.split(":").length?(e=f.split(":"),e[1].replace(/\s|\n|\r\n/g,"")):void 0):void 0}},f=function(a){var b;return b=n(a)&&!k(a)&&!l(a),b?q(a):a},g=function(a,b){var c,d,e;if(e=a,!(typeof a).match(/string/i))return e;if(d=i(b),c=d("content-type"),!c||!c.match(/^application\/json$/i))return e;try{e=JSON.parse(a)}catch(f){e=a}return e},h={xhr:function(){return new window.XMLHttpRequest},extend:function(){var a,b,c,d,e;if(e=arguments[0],d=2<=arguments.length?u.call(arguments,1):[],d.length<1||!/object/i.test(typeof e))return e;b=d.shift();for(c in b)a=b[c],e[c]=a;return d.length>0?h.extend.apply(e,[e].concat(d)):e},paramRgx:function(a){return new RegExp("(^|[^\\\\]):"+a+"(\\W|$)")},lookupDotted:function(a,b){var c,d;if(!t(b))return!1;for(d=b.split(".");d.length&&void 0!==a;)c=d.shift(),a=a[c]?a[c]:void 0;return a},extractObjectMappings:function(a,b){var c,d,e,f;null==a&&(a={}),null==b&&(b={}),e={};for(d in b)f=b[d],"string"==typeof f&&"@"===f.charAt(0)&&(c=h.lookupDotted(a,f.slice(1)),c&&(e[d]=c)),"function"==typeof f&&(e[d]=f(a));return e},omit:function(a,b){var c,d,e;if(null==b&&(b=[]),!/object/i.test(typeof a))return a;d={};for(c in a)e=a[c],b.indexOf(c)>=0||(d[c]=e);return d},encodeUriQuery:function(b){var c,d,e;return e=Object.keys(a).join("|"),d=new RegExp(e,"g"),c=function(b){return a[b]},encodeURIComponent(b).replace(d,c)},queryString:function(a){var b,c,d,e;if(!/object/i.test(a))return!1;c=[],d=function(a){return a};for(b in a)e=a[b],c.push(h.encodeUriQuery(b)+"="+h.encodeUriQuery(d(e)));return c.length>0?c.join("&"):null},transformUrl:function(a,b){var c,d,e,f,g,i,j,k,l,m,n;for(null==a&&(a=""),null==b&&(b={}),k=a.split(/\W/),f={},e=0,g=k.length;g>e;e++)i=k[e],i&&h.paramRgx(i).test(a)&&(f[i]=!0);c=function(a,b,c){var d;return d="/"===c.charAt(0),d?c:b+c};for(l in f)j=b.hasOwnProperty(l)?b[l]:null,d=new RegExp("(/?):"+l+"(\\W|$)","g"),m=c,n=d,null!==j&&void 0!==j&&(m=p(j),n=new RegExp(":"+l+"(\\W|$)","g")),a=a.replace(n,m),a=a.replace(/\/\.(?=\w+($|\?))/,".");return a.replace(/\/$/,"")}},d=function(a,d,e){var i,j,k,l,n;l=h.extend({},b,e),i=function(){function a(){}return a}(),k=function(b,e){var i,j,k,l,n,p;return j=e.url||a,i=h.extend({},d,e.params),n=(e.method||"GET").toUpperCase(),l=e.has_body===!0,p=e.transform||{},k=function(a,b){var d,k,q,r,s,t,u,v,w,x,y,z,A;v=h.extractObjectMappings(a,i),w=function(){var a;a=[];for(r in v)a.push(r);return a}(),t=h.omit(a,w),x=h.queryString(t),y=h.transformUrl(j,v),q=h.extend({},c,e.headers),A=h.xhr(),null===x||l||(y=[y,x].join("?"));for(s in q)z=q[s],m(z)&&(z=z(a)),void 0!==z&&A.setRequestHeader(s,z);return A.open(n,y,!0),u=function(){var a,c,d,e;return e=A.statusText,d=A.status,a=A.response?A.response:A.responseText,q=A.getAllResponseHeaders(),c=g(a,q),m(p.response)&&(c=p.response(a)),o(d)?b(!1,c,A):b({response:a},void 0,A)},k=function(){return b({response:null},void 0,A)},A.onload=u,A.onerror=k,l?(d=f(a),m(p.request)&&(d=p.request(a)),A.send(d),!0):A.send()}};for(j in l)n=l[j],i[j]=k(j,n);return i},d.fn=h,this.define?this.define([],function(){return d}):this.Flyby=d}).call(this);