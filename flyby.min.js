(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=[].slice;b={get:{method:"GET"},create:{method:"POST",has_body:!0},update:{method:"PATCH",has_body:!0},destroy:{method:"DESTROY",has_body:!0}},e=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/,c={"Content-Type":"application/json; charset=utf-8",Accept:"application/json, text/plain, */*"},a={"%40":"@","%3A":":","%24":"$","%2C":",","%3B":";"},t=Object.prototype.toString,q=function(a){return a>=200&&300>a},o=function(a){return/object/i.test(typeof a)},p=function(a){return/string/i.test(typeof a)},u=function(a){return function(b){return null!==t.call(b).match(a)}},l=u(/\[object\sfile\]/i),k=u(/\[object\sblob\]/i),m=u(/\[object\sformdata\]/i),j=u(/\[object\sarray\]/i),s=function(a){return JSON.stringify(a)},n=function(a){return/function/i.test(typeof a)},v=function(a){var b,c,d;return d="hasOwnProperty"!==a,b=[".",a].join(""),c=e.test(b),a&&d&&c},r=function(a){return function(b,c){return""+a+c}},i=function(a){var b,c,d;return b=(a||"").split("\n"),d=function(a,b){var c;return c=new RegExp(b,"gi"),c.test(a)},c=function(a){var c,e,f;return(typeof a).match(/string/i)?(f=function(){var e,f,g;for(g=[],e=0,f=b.length;f>e;e++)c=b[e],d(c,a)&&g.push(c);return g}()[0],f&&2===f.split(":").length?(e=f.split(":"),e[1].replace(/\s|\n|\r\n/g,"")):void 0):void 0}},f=function(a){var b;return b=o(a)&&!l(a)&&!m(a),b?s(a):a},g=function(a,b){var c,d,e;if(e=a,!(typeof a).match(/string/i))return e;if(d=i(b),c=d("content-type"),!c||!c.match(/application\/json/i))return e;try{e=JSON.parse(a)}catch(f){e=a}return e},h={upper:function(a){var b;return null!=(b="function"==typeof a.toUpperCase?a.toUpperCase():void 0)?b:a},xhr:function(){return new window.XMLHttpRequest},extend:function(){var a,b,c,d,e;if(e=arguments[0],d=2<=arguments.length?w.call(arguments,1):[],d.length<1||!/object/i.test(typeof e))return e;b=d.shift();for(c in b)a=b[c],e[c]=a;return d.length>0?h.extend.apply(e,[e].concat(d)):e},paramRgx:function(a){return new RegExp("(^|[^\\\\]):"+a+"(\\W|$)")},lookupDotted:function(a,b){var c,d;if(!v(b))return!1;for(d=b.split(".");d.length&&void 0!==a;)c=d.shift(),a=a[c]?a[c]:void 0;return a},extractObjectMappings:function(a,b,c){var d,e,f,g;null==a&&(a={}),null==b&&(b={}),null==c&&(c=[]),e={},f=function(b){var d,e;for(d=void 0,b=b.slice(0),e=null;void 0===d&&b.length>0;)e=b.shift(),"@"===e.charAt(0)&&(d=h.lookupDotted(a,e.slice(1)));return c.push(e.slice(1)),d};for(d in b)g=b[d],j(g)&&(e[d]=f(g)),p(g)&&"@"===g.charAt(0)&&(c.push(g.slice(1)),e[d]=h.lookupDotted(a,g.slice(1))),n(g)&&(e[d]=g(a));return e},omit:function(a,b){var c,d,e;if(null==b&&(b=[]),!/object/i.test(typeof a))return a;d={};for(c in a)e=a[c],b.indexOf(c)>=0||(d[c]=e);return d},encodeUriQuery:function(b){var c,d,e;return e=Object.keys(a).join("|"),d=new RegExp(e,"g"),c=function(b){return a[b]},encodeURIComponent(b).replace(d,c)},queryString:function(a){var b,c,d,e;if(!/object/i.test(a))return!1;c=[],d=function(a){return a};for(b in a)e=a[b],c.push(h.encodeUriQuery(b)+"="+h.encodeUriQuery(d(e)));return c.length>0?c.join("&"):null},transformUrl:function(a,b){var c,d,e,f,g,i,j,k,l,m,n;for(null==a&&(a=""),null==b&&(b={}),k=a.split(/\W/),f={},e=0,g=k.length;g>e;e++)i=k[e],i&&h.paramRgx(i).test(a)&&(f[i]=!0);c=function(a,b,c){var d;return d="/"===c.charAt(0),d?c:b+c};for(l in f)j=b.hasOwnProperty(l)?b[l]:null,d=new RegExp("(/?):"+l+"(\\W|$)","g"),m=c,n=d,null!==j&&void 0!==j&&(m=r(j),n=new RegExp(":"+l+"(\\W|$)","g")),a=a.replace(n,m),a=a.replace(/\/\.(?=\w+($|\?))/,".");return a.replace(/\/$/,"")}},d=function(a,d,e){var i,j,k,l,m;l=h.extend({},b,e),i=function(){function a(){}return a}(),k=function(b,e){var i,j,k,l,m,o,p;return j=e.url||a,i=h.extend({},d,e.params),m=h.upper(null!=(o=e.method)?o:"GET"),l=e.has_body===!0,p=e.transform||{},k=function(a,b){var d,k,o,r,s,t,u,v,w,x,y,z,A,B,C;v=[],u=h.extractObjectMappings(a,i,v),s=h.omit(a,v),w=h.queryString(s),A=h.transformUrl(j,u),o=h.extend({},c,e.headers),C=h.xhr(),null===w||l||(A=A+"?"+w),z=null!=(x="function"==typeof m?m(a):void 0)?x:m,C.open(z,A,!0);for(r in o)B=o[r],n(B)&&(B=B(a)),void 0!==B&&C.setRequestHeader(r,B);return t=function(){var a,c,d,e;return d=C.status,e=C.statusText,a=C.response,a||(a=C.responseText),o=C.getAllResponseHeaders(),c=g(a,o),n(p.response)&&(c=p.response(a)),q(d)?b(!1,c,C):b({response:a},void 0,C)},k=function(){return b({response:null},void 0,C)},C.onload=t,C.onerror=k,l?(d=null!=(y="function"==typeof p.request?p.request(a):void 0)?y:f(a),C.send(d),!0):C.send()}};for(j in l)m=l[j],i[j]=k(j,m);return i},d.fn=h,this.define?this.define([],function(){return d}):this.Flyby=d}).call(this);